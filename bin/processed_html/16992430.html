<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><head><link href="../../src/css/general.css" rel="stylesheet" /></head><a href="/questions/16992430/multiple-calls-at-once-to-a-method-that-can-only-run-one-at-a-time" class="question-hyperlink">Multiple calls (at once) to a method that can only run one at a time</a><div class="s-prose js-post-body" itemprop="text">
                
<p>I have a business logic method that has to be finished before it can be called again. Multiple clients have the ability to call it at once:</p>

<pre><code>public void DoSomething() {}
</code></pre>

<p>I was thinking about solving it by making the method private, and creating a new public method to put the requests on a queue:</p>

<pre><code>public void QueueSomeWork()
{
    // put on a Queue object
    // How will DoSomething get invoked now?
}

private void DoSomething() {}
</code></pre>

<p>I'm trying to solve this issue in an elegant way. My issue is how <code>DoSomething()</code> will know to run. I thought about creating a timer to check the queue, but then it would be running 24/7 for something that happens maybe twice per year.</p>

<p>Another thought is to have <code>DoSomething()</code> fire an event when it's done that something else would subscribe to, pick some work off the queue, and call <code>DoSomething()</code>. Is there a better way?</p>
    </div><div class="s-prose js-post-body" itemprop="text">
<p>Why don't you use a lock guard? </p>

<p>Eg :</p>

<pre><code>   private static Object lockGuard = new Object();
   public void DoSomething()
   {
     lock (lockGuard) 
      {
          //logic gere
      }
    }
</code></pre>

<p>Locking a resource will prevent access from multiple threads in the same time. </p>

<p>More on lock : <a href="http://msdn.microsoft.com/en-us/library/c5kehkcz(v=vs.110).aspx" rel="noreferrer">http://msdn.microsoft.com/en-us/library/c5kehkcz(v=vs.110).aspx</a></p>
    </div></body></html>